services:
  server:
    build:
      context: .
      dockerfile: Dockerfile.server
    container_name: chatpp-server
    ports:
      - "8080:8080"
    volumes:
      - ./data:/app/data
      - ./downloads:/app/downloads
    networks:
      - chatpp-network
    restart: unless-stopped

  # Optional: Linux client for testing
  # client:
  #   build:
  #     context: .
  #     dockerfile: Dockerfile.client
  #   container_name: chatpp-client
  #   depends_on:
  #     - server
  #   environment:
  #     - SERVER_HOST=server
  #     - SERVER_PORT=8080
  #   networks:
  #     - chatpp-network
  #   stdin_open: true
  #   tty: true

networks:
  chatpp-network:
    driver: bridge
